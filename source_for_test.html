<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="modevlib/imports/import.js"></script>
    <link type="text/css" rel="stylesheet" href="css/menu.css"/>
</head>
<body>
<p>Select a test:</p>
<select id="testSelect"></select>
<div id="tests">
    <table>
        <tbody id="tablebody">
        </tbody>
    </table>
</div>
<script type="application/javascript">

    importScript([
        'modevlib/main.js'
    ], function(){
        Thread.run(function*(){
            var tests = yield (search({
                "limit": 10000,
                "groupby": ["test.url"],
                "from": "coverage"
            }));

            console.log(tests);
            tests.data.forEach(function(element, index, array) {
                $("#testSelect").append("<option value='" + element[0] + "'>" + element[0] + "</option>")
            });
        });
    });

    var search = function*(query){
        var output = yield (Rest.post({
            url: "https://activedata.allizom.org/query",
            json: query
        }));
        yield (output);
    };

</script>
</body>
</html>